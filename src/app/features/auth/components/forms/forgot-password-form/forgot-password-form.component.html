<form [formGroup]="forgotPasswordForm" (ngSubmit)="onSubmit()">
  @if (successMessage) {
    <div class="success-message">
      {{ successMessage }}
    </div>
  }

  @if (errorMessage) {
    <div class="error-message">
      {{ errorMessage }}
    </div>
  }

  <mat-form-field appearance="outline" class="full-width">
    <mat-label>Email</mat-label>
    <input matInput type="email" formControlName="email" required>
    <mat-icon matSuffix>mail</mat-icon>
    @if (email?.invalid && (email?.touched || isSubmitted)) {
      <mat-error>
        @if (email?.hasError('required')) {
          Email jest wymagany
        }
        @if (email?.hasError('email')) {
          Podaj poprawny adres email
        }
      </mat-error>
    }
  </mat-form-field>

  <div class="form-description">
    <p>Podaj swój adres email, a wyślemy Ci instrukcje resetowania hasła.</p>
  </div>

  <button
    mat-raised-button
    color="primary"
    class="full-width"
    type="submit"
    [disabled]="forgotPasswordForm.invalid || isLoading"
  >
    @if (isLoading) {
      <mat-spinner diameter="24"></mat-spinner>
    } @else {
      Resetuj hasło
    }
  </button>
</form>